import{S as Fe,i as Qe,s as $e,e as o,t as v,k as f,w as ze,c as n,a as r,h as _,d as s,m,x as He,b as g,g as X,F as e,y as Ke,M as We,j as L,q as Xe,o as Ye,B as Ge,K as xe,v as et}from"../../chunks/vendor-b1e65c03.js";import{p as tt}from"../../chunks/stores-5cc93305.js";import{g as qe}from"../../chunks/navigation-bd39ff07.js";import lt from"./QrJs.svelte-de5aa19a.js";import"../../chunks/singletons-a6a7384f.js";function at(u){let b,p,R,V,q,P,d,y,E,S,B,a,t,D,k,C,ie,U,ce,ue,M,O,i,Z=u[2].Institution+"",Y,de,fe,me,F=u[2].postcode+"",G,pe,he,ve,Q=u[2].city+"",x,_e,we,ye,$=u[2].country+"",ee,Ee,z,H,te,ge,K,le,be,I,T,A,ke,ae,De,J,N,W,Ie,w,je,Pe;return C=new lt({props:{codeValue:window.location.href,squareSize:"100"}}),{c(){b=o("center"),p=o("button"),R=v("Download PDF"),V=f(),q=o("hr"),P=f(),d=o("div"),y=o("div"),E=o("div"),S=o("p"),B=o("small"),a=v("id: "),t=v(u[3]),D=f(),k=o("p"),ze(C.$$.fragment),ie=f(),U=o("small"),ce=v("scan and share"),ue=f(),M=o("div"),O=o("p"),i=o("small"),Y=v(Z),de=f(),fe=o("br"),me=f(),G=v(F),pe=f(),he=o("br"),ve=f(),x=v(Q),_e=f(),we=o("br"),ye=f(),ee=v($),Ee=f(),z=o("center"),H=o("h5"),te=v(u[0]),ge=f(),K=o("p"),le=v(u[1]),be=f(),I=o("div"),T=o("div"),A=o("small"),ke=v("Date and time: "),ae=v(u[4]),De=f(),J=o("div"),N=o("p"),W=o("small"),Ie=v("signature"),this.h()},l(l){b=n(l,"CENTER",{});var c=r(b);p=n(c,"BUTTON",{class:!0});var Se=r(p);R=_(Se,"Download PDF"),Se.forEach(s),c.forEach(s),V=m(l),q=n(l,"HR",{}),P=m(l),d=n(l,"DIV",{id:!0});var j=r(d);y=n(j,"DIV",{class:!0});var se=r(y);E=n(se,"DIV",{class:!0});var oe=r(E);S=n(oe,"P",{});var Be=r(S);B=n(Be,"SMALL",{});var Le=r(B);a=_(Le,"id: "),t=_(Le,u[3]),Le.forEach(s),Be.forEach(s),D=m(oe),k=n(oe,"P",{});var ne=r(k);He(C.$$.fragment,ne),ie=m(ne),U=n(ne,"SMALL",{});var Ce=r(U);ce=_(Ce,"scan and share"),Ce.forEach(s),ne.forEach(s),oe.forEach(s),ue=m(se),M=n(se,"DIV",{class:!0});var Re=r(M);O=n(Re,"P",{class:!0});var Me=r(O);i=n(Me,"SMALL",{});var h=r(i);Y=_(h,Z),de=m(h),fe=n(h,"BR",{}),me=m(h),G=_(h,F),pe=m(h),he=n(h,"BR",{}),ve=m(h),x=_(h,Q),_e=m(h),we=n(h,"BR",{}),ye=m(h),ee=_(h,$),h.forEach(s),Me.forEach(s),Re.forEach(s),se.forEach(s),Ee=m(j),z=n(j,"CENTER",{});var Oe=r(z);H=n(Oe,"H5",{});var Te=r(H);te=_(Te,u[0]),Te.forEach(s),Oe.forEach(s),ge=m(j),K=n(j,"P",{});var Ae=r(K);le=_(Ae,u[1]),Ae.forEach(s),be=m(j),I=n(j,"DIV",{class:!0});var re=r(I);T=n(re,"DIV",{class:!0});var Je=r(T);A=n(Je,"SMALL",{});var Ve=r(A);ke=_(Ve,"Date and time: "),ae=_(Ve,u[4]),Ve.forEach(s),Je.forEach(s),De=m(re),J=n(re,"DIV",{class:!0});var Ne=r(J);N=n(Ne,"P",{class:!0});var Ue=r(N);W=n(Ue,"SMALL",{});var Ze=r(W);Ie=_(Ze,"signature"),Ze.forEach(s),Ue.forEach(s),Ne.forEach(s),re.forEach(s),j.forEach(s),this.h()},h(){g(p,"class","button-secondary"),g(E,"class","one-half column"),g(O,"class","u-pull-right"),g(M,"class","one-half column"),g(y,"class","row"),g(T,"class","one-half column"),g(N,"class","u-pull-right"),g(J,"class","one-half column"),g(I,"class","row"),g(d,"id","capture")},m(l,c){X(l,b,c),e(b,p),e(p,R),X(l,V,c),X(l,q,c),X(l,P,c),X(l,d,c),e(d,y),e(y,E),e(E,S),e(S,B),e(B,a),e(B,t),e(E,D),e(E,k),Ke(C,k,null),e(k,ie),e(k,U),e(U,ce),e(y,ue),e(y,M),e(M,O),e(O,i),e(i,Y),e(i,de),e(i,fe),e(i,me),e(i,G),e(i,pe),e(i,he),e(i,ve),e(i,x),e(i,_e),e(i,we),e(i,ye),e(i,ee),e(d,Ee),e(d,z),e(z,H),e(H,te),e(d,ge),e(d,K),e(K,le),e(d,be),e(d,I),e(I,T),e(T,A),e(A,ke),e(A,ae),e(I,De),e(I,J),e(J,N),e(N,W),e(W,Ie),w=!0,je||(Pe=We(p,"click",u[5]),je=!0)},p(l,[c]){(!w||c&8)&&L(t,l[3]),(!w||c&4)&&Z!==(Z=l[2].Institution+"")&&L(Y,Z),(!w||c&4)&&F!==(F=l[2].postcode+"")&&L(G,F),(!w||c&4)&&Q!==(Q=l[2].city+"")&&L(x,Q),(!w||c&4)&&$!==($=l[2].country+"")&&L(ee,$),(!w||c&1)&&L(te,l[0]),(!w||c&2)&&L(le,l[1]),(!w||c&16)&&L(ae,l[4])},i(l){w||(Xe(C.$$.fragment,l),w=!0)},o(l){Ye(C.$$.fragment,l),w=!1},d(l){l&&s(b),l&&s(V),l&&s(q),l&&s(P),l&&s(d),Ge(C),je=!1,Pe()}}}function st(u,b,p){let R;xe(u,tt,a=>p(6,R=a));let V=null,q=null,P={},d=null,y=null;const E=()=>{let a=window.location.href;for(var t=0;t<a.length;t++)if(a[t]+a[t+1]+a[t+2]+a[t+3]+a[t+4]+a[t+5]+a[t+6]+a[t+7]+a[t+8]=="document/")return a.slice(t+9,a.length)},S=async a=>{let t=E();return await fetch("https://backend.encrygen.co.uk/api/docs/display/"+t,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({key:a})}).then(D=>{if(D.ok)if(D.body==null)alert("you are not allowed to view this content"),qe("/");else return alert("Invoice found successfully..."),D.json();else alert("you are not allowed to view this content"),qe("/")})};return et(async()=>{if(R.params.generate!="display"){let a=prompt("Please enter your key:");if(a==null||a=="")alert("no key"),qe("/");else{let t=await S(a);p(0,V=t.title),p(3,d=t._id),p(1,q=t.content),p(2,P=t.profile),p(4,y=t.date)}}}),[V,q,P,d,y,async()=>{document.getElementById("capture");var a=window.$("#capture").html(),t=window.open("","","height=400,width=800");t.document.write(`<html><head><title>Doc ${Date()}</title>`),t.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />'),t.document.write('</head><body ><div class="container">'),t.document.write(a),t.document.write('</div><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></body></html>'),t.document.close(),await new Promise(k=>setTimeout(k,400)),t.print()}]}class ut extends Fe{constructor(b){super();Qe(this,b,st,at,$e,{})}}export{ut as default};
