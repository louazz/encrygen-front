import{S as Ye,i as $e,s as Xe,e,t as c,k as d,c as l,a as r,h as i,d as o,m as h,g as ft,F as t,j as k,w as Ze,x as xe,b as q,y as tl,L as el,q as ll,o as al,B as ol,_ as rl,K as sl,v as nl}from"../../chunks/vendor-022b7721.js";import{p as cl}from"../../chunks/stores-22f066c8.js";import{g as Re}from"../../chunks/navigation-bd39ff07.js";import il from"./QrJs.svelte-08f177d1.js";import"../../chunks/singletons-a6a7384f.js";function Ke(u,v,m){const I=u.slice();return I[11]=v[m],I}function We(u){let v,m,I,P=u[11].id+"",A,V,_,w=u[11].name+"",L,C,f,H=u[11].price+"",n,s,j,S,F=u[11].quantity+"",N,W;return{c(){v=e("tr"),m=e("td"),I=e("strong"),A=c(P),V=d(),_=e("td"),L=c(w),C=d(),f=e("td"),n=c(H),s=c(" \xA3"),j=d(),S=e("td"),N=c(F),W=d()},l(y){v=l(y,"TR",{});var E=r(v);m=l(E,"TD",{});var tt=r(m);I=l(tt,"STRONG",{});var et=r(I);A=i(et,P),et.forEach(o),tt.forEach(o),V=h(E),_=l(E,"TD",{});var J=r(_);L=i(J,w),J.forEach(o),C=h(E),f=l(E,"TD",{});var U=r(f);n=i(U,H),s=i(U," \xA3"),U.forEach(o),j=h(E),S=l(E,"TD",{});var lt=r(S);N=i(lt,F),lt.forEach(o),W=h(E),E.forEach(o)},m(y,E){ft(y,v,E),t(v,m),t(m,I),t(I,A),t(v,V),t(v,_),t(_,L),t(v,C),t(v,f),t(f,n),t(f,s),t(v,j),t(v,S),t(S,N),t(v,W)},p(y,E){E&1&&P!==(P=y[11].id+"")&&k(A,P),E&1&&w!==(w=y[11].name+"")&&k(L,w),E&1&&H!==(H=y[11].price+"")&&k(n,H),E&1&&F!==(F=y[11].quantity+"")&&k(N,F)},d(y){y&&o(v)}}}function dl(u){let v,m,I,P,A,V,_,w,L,C,f,H=u[2].name+"",n,s,j,S=u[2].Faddress+"",F,N,W,y=u[2].country+"",E,tt,et,J=u[2].city+"",U,lt,Ut,vt=u[2].postcode+"",Rt,zt,at,ot,g,mt=u[4].Institution+"",Bt,Qt,Gt,Kt,pt=u[4].postcode+"",Pt,Wt,Yt,$t,_t=u[4].city+"",St,Xt,Zt,xt,Et=u[4].country+"",At,te,z,bt,ee,wt,rt,le,Ht,ae,Y,$,oe,gt,re,se,Q,X,Z,st,ne,ce,x,ie,jt,de,he,M,yt,ue,fe,Tt,ve,me,Dt,pe,_e,kt,Ee,be,nt,we,G,ct,it,ge,qt,ye,dt,ht,It,Te,T,De,Be;$=new il({props:{codeValue:window.location.href,squareSize:"100"}});let ut=u[0],D=[];for(let a=0;a<ut.length;a+=1)D[a]=We(Ke(u,ut,a));return{c(){v=e("center"),m=e("button"),I=c("Download PDF"),P=d(),A=e("hr"),V=d(),_=e("div"),w=e("div"),L=e("div"),C=e("p"),f=e("small"),n=c(H),s=e("br"),j=d(),F=c(S),N=e("br"),W=d(),E=c(y),tt=e("br"),et=d(),U=c(J),lt=e("br"),Ut=d(),Rt=c(vt),zt=d(),at=e("div"),ot=e("p"),g=e("small"),Bt=c(mt),Qt=d(),Gt=e("br"),Kt=d(),Pt=c(pt),Wt=d(),Yt=e("br"),$t=d(),St=c(_t),Xt=d(),Zt=e("br"),xt=d(),At=c(Et),te=d(),z=e("center"),bt=e("h5"),ee=c("Invoice"),wt=e("p"),rt=e("small"),le=c("id: "),Ht=c(u[3]),ae=d(),Y=e("p"),Ze($.$$.fragment),oe=d(),gt=e("small"),re=c("scan and share"),se=d(),Q=e("table"),X=e("thead"),Z=e("tr"),st=e("th"),ne=c("Product"),ce=d(),x=e("th"),ie=c("Total: "),jt=c(u[1]),de=c(" \xA3"),he=d(),M=e("tr"),yt=e("th"),ue=c("id"),fe=d(),Tt=e("th"),ve=c("name"),me=d(),Dt=e("th"),pe=c("price"),_e=d(),kt=e("th"),Ee=c("quantity"),be=d(),nt=e("tbody");for(let a=0;a<D.length;a+=1)D[a].c();we=d(),G=e("div"),ct=e("div"),it=e("small"),ge=c("Date and time: "),qt=c(u[5]),ye=d(),dt=e("div"),ht=e("p"),It=e("small"),Te=c("signature"),this.h()},l(a){v=l(a,"CENTER",{});var p=r(v);m=l(p,"BUTTON",{class:!0});var b=r(m);I=i(b,"Download PDF"),b.forEach(o),p.forEach(o),P=h(a),A=l(a,"HR",{}),V=h(a),_=l(a,"DIV",{id:!0});var O=r(_);w=l(O,"DIV",{class:!0});var Vt=r(w);L=l(Vt,"DIV",{class:!0});var Pe=r(L);C=l(Pe,"P",{});var Se=r(C);f=l(Se,"SMALL",{});var R=r(f);n=i(R,H),s=l(R,"BR",{}),j=h(R),F=i(R,S),N=l(R,"BR",{}),W=h(R),E=i(R,y),tt=l(R,"BR",{}),et=h(R),U=i(R,J),lt=l(R,"BR",{}),Ut=h(R),Rt=i(R,vt),R.forEach(o),Se.forEach(o),Pe.forEach(o),zt=h(Vt),at=l(Vt,"DIV",{class:!0});var Ae=r(at);ot=l(Ae,"P",{class:!0});var He=r(ot);g=l(He,"SMALL",{});var B=r(g);Bt=i(B,mt),Qt=h(B),Gt=l(B,"BR",{}),Kt=h(B),Pt=i(B,pt),Wt=h(B),Yt=l(B,"BR",{}),$t=h(B),St=i(B,_t),Xt=h(B),Zt=l(B,"BR",{}),xt=h(B),At=i(B,Et),B.forEach(o),He.forEach(o),Ae.forEach(o),Vt.forEach(o),te=h(O),z=l(O,"CENTER",{});var Lt=r(z);bt=l(Lt,"H5",{});var je=r(bt);ee=i(je,"Invoice"),je.forEach(o),wt=l(Lt,"P",{});var qe=r(wt);rt=l(qe,"SMALL",{});var ke=r(rt);le=i(ke,"id: "),Ht=i(ke,u[3]),ke.forEach(o),qe.forEach(o),ae=h(Lt),Y=l(Lt,"P",{});var Ct=r(Y);xe($.$$.fragment,Ct),oe=h(Ct),gt=l(Ct,"SMALL",{});var Ve=r(gt);re=i(Ve,"scan and share"),Ve.forEach(o),Ct.forEach(o),Lt.forEach(o),se=h(O),Q=l(O,"TABLE",{class:!0});var Mt=r(Q);X=l(Mt,"THEAD",{});var Ot=r(X);Z=l(Ot,"TR",{});var Ft=r(Z);st=l(Ft,"TH",{colspan:!0});var Ce=r(st);ne=i(Ce,"Product"),Ce.forEach(o),ce=h(Ft),x=l(Ft,"TH",{});var Nt=r(x);ie=i(Nt,"Total: "),jt=i(Nt,u[1]),de=i(Nt," \xA3"),Nt.forEach(o),Ft.forEach(o),he=h(Ot),M=l(Ot,"TR",{});var K=r(M);yt=l(K,"TH",{});var Me=r(yt);ue=i(Me,"id"),Me.forEach(o),fe=h(K),Tt=l(K,"TH",{});var Oe=r(Tt);ve=i(Oe,"name"),Oe.forEach(o),me=h(K),Dt=l(K,"TH",{});var Fe=r(Dt);pe=i(Fe,"price"),Fe.forEach(o),_e=h(K),kt=l(K,"TH",{});var Ne=r(kt);Ee=i(Ne,"quantity"),Ne.forEach(o),K.forEach(o),Ot.forEach(o),be=h(Mt),nt=l(Mt,"TBODY",{});var Je=r(nt);for(let Le=0;Le<D.length;Le+=1)D[Le].l(Je);Je.forEach(o),Mt.forEach(o),we=h(O),G=l(O,"DIV",{class:!0});var Jt=r(G);ct=l(Jt,"DIV",{class:!0});var Ue=r(ct);it=l(Ue,"SMALL",{});var Ie=r(it);ge=i(Ie,"Date and time: "),qt=i(Ie,u[5]),Ie.forEach(o),Ue.forEach(o),ye=h(Jt),dt=l(Jt,"DIV",{class:!0});var ze=r(dt);ht=l(ze,"P",{class:!0});var Qe=r(ht);It=l(Qe,"SMALL",{});var Ge=r(It);Te=i(Ge,"signature"),Ge.forEach(o),Qe.forEach(o),ze.forEach(o),Jt.forEach(o),O.forEach(o),this.h()},h(){q(m,"class","button-secondary"),q(L,"class","one-half column"),q(ot,"class","u-pull-right"),q(at,"class","one-half column"),q(w,"class","row"),q(st,"colspan","3"),q(Q,"class","u-full-width"),q(ct,"class","one-half column"),q(ht,"class","u-pull-right"),q(dt,"class","one-half column"),q(G,"class","row"),q(_,"id","capture")},m(a,p){ft(a,v,p),t(v,m),t(m,I),ft(a,P,p),ft(a,A,p),ft(a,V,p),ft(a,_,p),t(_,w),t(w,L),t(L,C),t(C,f),t(f,n),t(f,s),t(f,j),t(f,F),t(f,N),t(f,W),t(f,E),t(f,tt),t(f,et),t(f,U),t(f,lt),t(f,Ut),t(f,Rt),t(w,zt),t(w,at),t(at,ot),t(ot,g),t(g,Bt),t(g,Qt),t(g,Gt),t(g,Kt),t(g,Pt),t(g,Wt),t(g,Yt),t(g,$t),t(g,St),t(g,Xt),t(g,Zt),t(g,xt),t(g,At),t(_,te),t(_,z),t(z,bt),t(bt,ee),t(z,wt),t(wt,rt),t(rt,le),t(rt,Ht),t(z,ae),t(z,Y),tl($,Y,null),t(Y,oe),t(Y,gt),t(gt,re),t(_,se),t(_,Q),t(Q,X),t(X,Z),t(Z,st),t(st,ne),t(Z,ce),t(Z,x),t(x,ie),t(x,jt),t(x,de),t(X,he),t(X,M),t(M,yt),t(yt,ue),t(M,fe),t(M,Tt),t(Tt,ve),t(M,me),t(M,Dt),t(Dt,pe),t(M,_e),t(M,kt),t(kt,Ee),t(Q,be),t(Q,nt);for(let b=0;b<D.length;b+=1)D[b].m(nt,null);t(_,we),t(_,G),t(G,ct),t(ct,it),t(it,ge),t(it,qt),t(G,ye),t(G,dt),t(dt,ht),t(ht,It),t(It,Te),T=!0,De||(Be=el(m,"click",u[6]),De=!0)},p(a,[p]){if((!T||p&4)&&H!==(H=a[2].name+"")&&k(n,H),(!T||p&4)&&S!==(S=a[2].Faddress+"")&&k(F,S),(!T||p&4)&&y!==(y=a[2].country+"")&&k(E,y),(!T||p&4)&&J!==(J=a[2].city+"")&&k(U,J),(!T||p&4)&&vt!==(vt=a[2].postcode+"")&&k(Rt,vt),(!T||p&16)&&mt!==(mt=a[4].Institution+"")&&k(Bt,mt),(!T||p&16)&&pt!==(pt=a[4].postcode+"")&&k(Pt,pt),(!T||p&16)&&_t!==(_t=a[4].city+"")&&k(St,_t),(!T||p&16)&&Et!==(Et=a[4].country+"")&&k(At,Et),(!T||p&8)&&k(Ht,a[3]),(!T||p&2)&&k(jt,a[1]),p&1){ut=a[0];let b;for(b=0;b<ut.length;b+=1){const O=Ke(a,ut,b);D[b]?D[b].p(O,p):(D[b]=We(O),D[b].c(),D[b].m(nt,null))}for(;b<D.length;b+=1)D[b].d(1);D.length=ut.length}(!T||p&32)&&k(qt,a[5])},i(a){T||(ll($.$$.fragment,a),T=!0)},o(a){al($.$$.fragment,a),T=!1},d(a){a&&o(v),a&&o(P),a&&o(A),a&&o(V),a&&o(_),ol($),rl(D,a),De=!1,Be()}}}function hl(u,v,m){let I;sl(u,cl,n=>m(8,I=n));let P=[],A=0,V={},_="",w={},L=null;const C=()=>{let n=window.location.href;for(var s=0;s<n.length;s++)if(n[s]+n[s+1]+n[s+2]+n[s+3]+n[s+4]+n[s+5]+n[s+6]=="invoice")return n.slice(s+8,n.length)},f=async n=>{let s=C();return await fetch("https://backend.encrygen.co.uk/api/invoices/display/"+s,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({key:n})}).then(j=>{if(j.ok)if(j.body==null)alert("you are not allowed to view this content"),Re("/");else return alert("Invoice found successfully..."),j.json();else alert("you are not allowed to view this content"),Re("/")})};return nl(async()=>{if(I.params.generate!="display"){let n=prompt("Please enter your key:");if(n==null||n=="")alert("no key"),Re("/");else{let s=await f(n);m(0,P=s.products),m(3,_=s._id),m(2,V=s.client),m(1,A=s.total),m(4,w=s.profile),m(5,L=s.date)}}}),[P,A,V,_,w,L,async()=>{document.getElementById("capture");var n=window.$("#capture").html(),s=window.open("","","height=400,width=800");s.document.write(`<html><head><title>Doc ${Date()}</title>`),s.document.write('	<link rel="stylesheet" href="/normalize.css"> <link rel="stylesheet" href="/skeleton.css">'),s.document.write('</head><body ><div class="container">'),s.document.write(n),s.document.write("</div></body></html>"),s.document.close(),await new Promise(S=>setTimeout(S,400)),s.print()}]}class _l extends Ye{constructor(v){super();$e(this,v,hl,dl,Xe,{})}}export{_l as default};
