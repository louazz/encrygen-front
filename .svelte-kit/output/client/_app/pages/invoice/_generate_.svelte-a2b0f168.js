import{S as We,i as Ye,s as Xe,e,t as c,k as d,c as l,a as r,h as i,d as o,m as h,g as ft,F as t,j as k,w as Ze,x as xe,b as H,y as tl,M as el,q as ll,o as al,B as ol,$ as rl,K as sl,v as nl}from"../../chunks/vendor-b1e65c03.js";import{p as cl}from"../../chunks/stores-5cc93305.js";import{g as je}from"../../chunks/navigation-bd39ff07.js";import il from"./QrJs.svelte-00a99549.js";import"../../chunks/singletons-a6a7384f.js";function Ge(u,v,m){const I=u.slice();return I[11]=v[m],I}function Ke(u){let v,m,I,L=u[11].id+"",S,M,_,w=u[11].name+"",R,V,f,q=u[11].price+"",n,s,A,P,F=u[11].quantity+"",N,K;return{c(){v=e("tr"),m=e("td"),I=e("strong"),S=c(L),M=d(),_=e("td"),R=c(w),V=d(),f=e("td"),n=c(q),s=c(" \xA3"),A=d(),P=e("td"),N=c(F),K=d()},l(y){v=l(y,"TR",{});var E=r(v);m=l(E,"TD",{});var tt=r(m);I=l(tt,"STRONG",{});var et=r(I);S=i(et,L),et.forEach(o),tt.forEach(o),M=h(E),_=l(E,"TD",{});var J=r(_);R=i(J,w),J.forEach(o),V=h(E),f=l(E,"TD",{});var U=r(f);n=i(U,q),s=i(U," \xA3"),U.forEach(o),A=h(E),P=l(E,"TD",{});var lt=r(P);N=i(lt,F),lt.forEach(o),K=h(E),E.forEach(o)},m(y,E){ft(y,v,E),t(v,m),t(m,I),t(I,S),t(v,M),t(v,_),t(_,R),t(v,V),t(v,f),t(f,n),t(f,s),t(v,A),t(v,P),t(P,N),t(v,K)},p(y,E){E&1&&L!==(L=y[11].id+"")&&k(S,L),E&1&&w!==(w=y[11].name+"")&&k(R,w),E&1&&q!==(q=y[11].price+"")&&k(n,q),E&1&&F!==(F=y[11].quantity+"")&&k(N,F)},d(y){y&&o(v)}}}function dl(u){let v,m,I,L,S,M,_,w,R,V,f,q=u[2].name+"",n,s,A,P=u[2].Faddress+"",F,N,K,y=u[2].country+"",E,tt,et,J=u[2].city+"",U,lt,Ut,vt=u[2].postcode+"",jt,zt,at,ot,g,mt=u[4].Institution+"",Bt,Qt,$t,Gt,pt=u[4].postcode+"",Lt,Kt,Wt,Yt,_t=u[4].city+"",Pt,Xt,Zt,xt,Et=u[4].country+"",St,te,z,bt,ee,wt,rt,le,qt,ae,W,Y,oe,gt,re,se,Q,X,Z,st,ne,ce,x,ie,At,de,he,C,yt,ue,fe,Tt,ve,me,Dt,pe,_e,kt,Ee,be,nt,we,$,ct,it,ge,Ht,ye,dt,ht,It,Te,T,De,Be;Y=new il({props:{codeValue:window.location.href,squareSize:"100"}});let ut=u[0],D=[];for(let a=0;a<ut.length;a+=1)D[a]=Ke(Ge(u,ut,a));return{c(){v=e("center"),m=e("button"),I=c("Download PDF"),L=d(),S=e("hr"),M=d(),_=e("div"),w=e("div"),R=e("div"),V=e("p"),f=e("small"),n=c(q),s=e("br"),A=d(),F=c(P),N=e("br"),K=d(),E=c(y),tt=e("br"),et=d(),U=c(J),lt=e("br"),Ut=d(),jt=c(vt),zt=d(),at=e("div"),ot=e("p"),g=e("small"),Bt=c(mt),Qt=d(),$t=e("br"),Gt=d(),Lt=c(pt),Kt=d(),Wt=e("br"),Yt=d(),Pt=c(_t),Xt=d(),Zt=e("br"),xt=d(),St=c(Et),te=d(),z=e("center"),bt=e("h5"),ee=c("Invoice"),wt=e("p"),rt=e("small"),le=c("id: "),qt=c(u[3]),ae=d(),W=e("p"),Ze(Y.$$.fragment),oe=d(),gt=e("small"),re=c("scan and share"),se=d(),Q=e("table"),X=e("thead"),Z=e("tr"),st=e("th"),ne=c("Product"),ce=d(),x=e("th"),ie=c("Total: "),At=c(u[1]),de=c(" \xA3"),he=d(),C=e("tr"),yt=e("th"),ue=c("id"),fe=d(),Tt=e("th"),ve=c("name"),me=d(),Dt=e("th"),pe=c("price"),_e=d(),kt=e("th"),Ee=c("quantity"),be=d(),nt=e("tbody");for(let a=0;a<D.length;a+=1)D[a].c();we=d(),$=e("div"),ct=e("div"),it=e("small"),ge=c("Date and time: "),Ht=c(u[5]),ye=d(),dt=e("div"),ht=e("p"),It=e("small"),Te=c("signature"),this.h()},l(a){v=l(a,"CENTER",{});var p=r(v);m=l(p,"BUTTON",{class:!0});var b=r(m);I=i(b,"Download PDF"),b.forEach(o),p.forEach(o),L=h(a),S=l(a,"HR",{}),M=h(a),_=l(a,"DIV",{id:!0});var O=r(_);w=l(O,"DIV",{class:!0});var Mt=r(w);R=l(Mt,"DIV",{class:!0});var Le=r(R);V=l(Le,"P",{});var Pe=r(V);f=l(Pe,"SMALL",{});var j=r(f);n=i(j,q),s=l(j,"BR",{}),A=h(j),F=i(j,P),N=l(j,"BR",{}),K=h(j),E=i(j,y),tt=l(j,"BR",{}),et=h(j),U=i(j,J),lt=l(j,"BR",{}),Ut=h(j),jt=i(j,vt),j.forEach(o),Pe.forEach(o),Le.forEach(o),zt=h(Mt),at=l(Mt,"DIV",{class:!0});var Se=r(at);ot=l(Se,"P",{class:!0});var qe=r(ot);g=l(qe,"SMALL",{});var B=r(g);Bt=i(B,mt),Qt=h(B),$t=l(B,"BR",{}),Gt=h(B),Lt=i(B,pt),Kt=h(B),Wt=l(B,"BR",{}),Yt=h(B),Pt=i(B,_t),Xt=h(B),Zt=l(B,"BR",{}),xt=h(B),St=i(B,Et),B.forEach(o),qe.forEach(o),Se.forEach(o),Mt.forEach(o),te=h(O),z=l(O,"CENTER",{});var Rt=r(z);bt=l(Rt,"H5",{});var Ae=r(bt);ee=i(Ae,"Invoice"),Ae.forEach(o),wt=l(Rt,"P",{});var He=r(wt);rt=l(He,"SMALL",{});var ke=r(rt);le=i(ke,"id: "),qt=i(ke,u[3]),ke.forEach(o),He.forEach(o),ae=h(Rt),W=l(Rt,"P",{});var Vt=r(W);xe(Y.$$.fragment,Vt),oe=h(Vt),gt=l(Vt,"SMALL",{});var Me=r(gt);re=i(Me,"scan and share"),Me.forEach(o),Vt.forEach(o),Rt.forEach(o),se=h(O),Q=l(O,"TABLE",{class:!0});var Ct=r(Q);X=l(Ct,"THEAD",{});var Ot=r(X);Z=l(Ot,"TR",{});var Ft=r(Z);st=l(Ft,"TH",{colspan:!0});var Ve=r(st);ne=i(Ve,"Product"),Ve.forEach(o),ce=h(Ft),x=l(Ft,"TH",{});var Nt=r(x);ie=i(Nt,"Total: "),At=i(Nt,u[1]),de=i(Nt," \xA3"),Nt.forEach(o),Ft.forEach(o),he=h(Ot),C=l(Ot,"TR",{});var G=r(C);yt=l(G,"TH",{});var Ce=r(yt);ue=i(Ce,"id"),Ce.forEach(o),fe=h(G),Tt=l(G,"TH",{});var Oe=r(Tt);ve=i(Oe,"name"),Oe.forEach(o),me=h(G),Dt=l(G,"TH",{});var Fe=r(Dt);pe=i(Fe,"price"),Fe.forEach(o),_e=h(G),kt=l(G,"TH",{});var Ne=r(kt);Ee=i(Ne,"quantity"),Ne.forEach(o),G.forEach(o),Ot.forEach(o),be=h(Ct),nt=l(Ct,"TBODY",{});var Je=r(nt);for(let Re=0;Re<D.length;Re+=1)D[Re].l(Je);Je.forEach(o),Ct.forEach(o),we=h(O),$=l(O,"DIV",{class:!0});var Jt=r($);ct=l(Jt,"DIV",{class:!0});var Ue=r(ct);it=l(Ue,"SMALL",{});var Ie=r(it);ge=i(Ie,"Date and time: "),Ht=i(Ie,u[5]),Ie.forEach(o),Ue.forEach(o),ye=h(Jt),dt=l(Jt,"DIV",{class:!0});var ze=r(dt);ht=l(ze,"P",{class:!0});var Qe=r(ht);It=l(Qe,"SMALL",{});var $e=r(It);Te=i($e,"signature"),$e.forEach(o),Qe.forEach(o),ze.forEach(o),Jt.forEach(o),O.forEach(o),this.h()},h(){H(m,"class","button-secondary"),H(R,"class","one-half column"),H(ot,"class","u-pull-right"),H(at,"class","one-half column"),H(w,"class","row"),H(st,"colspan","3"),H(Q,"class","u-full-width"),H(ct,"class","one-half column"),H(ht,"class","u-pull-right"),H(dt,"class","one-half column"),H($,"class","row"),H(_,"id","capture")},m(a,p){ft(a,v,p),t(v,m),t(m,I),ft(a,L,p),ft(a,S,p),ft(a,M,p),ft(a,_,p),t(_,w),t(w,R),t(R,V),t(V,f),t(f,n),t(f,s),t(f,A),t(f,F),t(f,N),t(f,K),t(f,E),t(f,tt),t(f,et),t(f,U),t(f,lt),t(f,Ut),t(f,jt),t(w,zt),t(w,at),t(at,ot),t(ot,g),t(g,Bt),t(g,Qt),t(g,$t),t(g,Gt),t(g,Lt),t(g,Kt),t(g,Wt),t(g,Yt),t(g,Pt),t(g,Xt),t(g,Zt),t(g,xt),t(g,St),t(_,te),t(_,z),t(z,bt),t(bt,ee),t(z,wt),t(wt,rt),t(rt,le),t(rt,qt),t(z,ae),t(z,W),tl(Y,W,null),t(W,oe),t(W,gt),t(gt,re),t(_,se),t(_,Q),t(Q,X),t(X,Z),t(Z,st),t(st,ne),t(Z,ce),t(Z,x),t(x,ie),t(x,At),t(x,de),t(X,he),t(X,C),t(C,yt),t(yt,ue),t(C,fe),t(C,Tt),t(Tt,ve),t(C,me),t(C,Dt),t(Dt,pe),t(C,_e),t(C,kt),t(kt,Ee),t(Q,be),t(Q,nt);for(let b=0;b<D.length;b+=1)D[b].m(nt,null);t(_,we),t(_,$),t($,ct),t(ct,it),t(it,ge),t(it,Ht),t($,ye),t($,dt),t(dt,ht),t(ht,It),t(It,Te),T=!0,De||(Be=el(m,"click",u[6]),De=!0)},p(a,[p]){if((!T||p&4)&&q!==(q=a[2].name+"")&&k(n,q),(!T||p&4)&&P!==(P=a[2].Faddress+"")&&k(F,P),(!T||p&4)&&y!==(y=a[2].country+"")&&k(E,y),(!T||p&4)&&J!==(J=a[2].city+"")&&k(U,J),(!T||p&4)&&vt!==(vt=a[2].postcode+"")&&k(jt,vt),(!T||p&16)&&mt!==(mt=a[4].Institution+"")&&k(Bt,mt),(!T||p&16)&&pt!==(pt=a[4].postcode+"")&&k(Lt,pt),(!T||p&16)&&_t!==(_t=a[4].city+"")&&k(Pt,_t),(!T||p&16)&&Et!==(Et=a[4].country+"")&&k(St,Et),(!T||p&8)&&k(qt,a[3]),(!T||p&2)&&k(At,a[1]),p&1){ut=a[0];let b;for(b=0;b<ut.length;b+=1){const O=Ge(a,ut,b);D[b]?D[b].p(O,p):(D[b]=Ke(O),D[b].c(),D[b].m(nt,null))}for(;b<D.length;b+=1)D[b].d(1);D.length=ut.length}(!T||p&32)&&k(Ht,a[5])},i(a){T||(ll(Y.$$.fragment,a),T=!0)},o(a){al(Y.$$.fragment,a),T=!1},d(a){a&&o(v),a&&o(L),a&&o(S),a&&o(M),a&&o(_),ol(Y),rl(D,a),De=!1,Be()}}}function hl(u,v,m){let I;sl(u,cl,n=>m(8,I=n));let L=[],S=0,M={},_="",w={},R=null;const V=()=>{let n=window.location.href;for(var s=0;s<n.length;s++)if(n[s]+n[s+1]+n[s+2]+n[s+3]+n[s+4]+n[s+5]+n[s+6]=="invoice")return n.slice(s+8,n.length)},f=async n=>{let s=V();return await fetch("https://backend.encrygen.co.uk/api/invoices/display/"+s,{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify({key:n})}).then(A=>{if(A.ok)if(A.body==null)alert("you are not allowed to view this content"),je("/");else return alert("Invoice found successfully..."),A.json();else alert("you are not allowed to view this content"),je("/")})};return nl(async()=>{if(I.params.generate!="display"){let n=prompt("Please enter your key:");if(n==null||n=="")alert("no key"),je("/");else{let s=await f(n);m(0,L=s.products),m(3,_=s._id),m(2,M=s.client),m(1,S=s.total),m(4,w=s.profile),m(5,R=s.date)}}}),[L,S,M,_,w,R,async()=>{document.getElementById("capture");var n=window.$("#capture").html(),s=window.open("","","height=400,width=800");s.document.write(`<html><head><title>Doc ${Date()}</title>`),s.document.write('	<link rel="stylesheet" href="/normalize.css"> <link rel="stylesheet" href="/skeleton.css">'),s.document.write('</head><body ><div class="container">'),s.document.write(n),s.document.write('</div><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></body></html>'),s.document.close(),await new Promise(P=>setTimeout(P,400)),s.print()}]}class _l extends We{constructor(v){super();Ye(this,v,hl,dl,Xe,{})}}export{_l as default};
