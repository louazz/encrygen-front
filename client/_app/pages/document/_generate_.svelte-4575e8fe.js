import{S as Fe,i as Qe,s as $e,e as o,t as v,k as f,w as ze,c as n,a as r,h as _,d as s,m,x as He,b,g as X,F as e,y as Ke,L as We,j as I,q as Xe,o as Ye,B as Ge,K as xe,v as et}from"../../chunks/vendor-022b7721.js";import{p as tt}from"../../chunks/stores-22f066c8.js";import{g as Se}from"../../chunks/navigation-bd39ff07.js";import lt from"./QrJs.svelte-6fd6ffe9.js";import"../../chunks/singletons-a6a7384f.js";function at(d){let g,p,C,L,V,j,u,E,y,S,B,a,t,P,R,q,ie,U,ce,de,M,O,i,Z=d[2].Institution+"",Y,ue,fe,me,F=d[2].postcode+"",G,pe,he,ve,Q=d[2].city+"",x,_e,we,Ee,$=d[2].country+"",ee,ye,z,H,te,be,K,le,ge,k,T,A,ke,ae,De,J,N,W,Ie,w,Le,Be;return q=new lt({props:{codeValue:window.location.href,squareSize:"100"}}),{c(){g=o("center"),p=o("button"),C=v("Download PDF"),L=f(),V=o("hr"),j=f(),u=o("div"),E=o("div"),y=o("div"),S=o("p"),B=o("small"),a=v("id: "),t=v(d[3]),P=f(),R=o("p"),ze(q.$$.fragment),ie=f(),U=o("small"),ce=v("scan and share"),de=f(),M=o("div"),O=o("p"),i=o("small"),Y=v(Z),ue=f(),fe=o("br"),me=f(),G=v(F),pe=f(),he=o("br"),ve=f(),x=v(Q),_e=f(),we=o("br"),Ee=f(),ee=v($),ye=f(),z=o("center"),H=o("h5"),te=v(d[0]),be=f(),K=o("p"),le=v(d[1]),ge=f(),k=o("div"),T=o("div"),A=o("small"),ke=v("Date and time: "),ae=v(d[4]),De=f(),J=o("div"),N=o("p"),W=o("small"),Ie=v("signature"),this.h()},l(l){g=n(l,"CENTER",{});var c=r(g);p=n(c,"BUTTON",{class:!0});var Pe=r(p);C=_(Pe,"Download PDF"),Pe.forEach(s),c.forEach(s),L=m(l),V=n(l,"HR",{}),j=m(l),u=n(l,"DIV",{id:!0});var D=r(u);E=n(D,"DIV",{class:!0});var se=r(E);y=n(se,"DIV",{class:!0});var oe=r(y);S=n(oe,"P",{});var Re=r(S);B=n(Re,"SMALL",{});var Ve=r(B);a=_(Ve,"id: "),t=_(Ve,d[3]),Ve.forEach(s),Re.forEach(s),P=m(oe),R=n(oe,"P",{});var ne=r(R);He(q.$$.fragment,ne),ie=m(ne),U=n(ne,"SMALL",{});var qe=r(U);ce=_(qe,"scan and share"),qe.forEach(s),ne.forEach(s),oe.forEach(s),de=m(se),M=n(se,"DIV",{class:!0});var Ce=r(M);O=n(Ce,"P",{class:!0});var Me=r(O);i=n(Me,"SMALL",{});var h=r(i);Y=_(h,Z),ue=m(h),fe=n(h,"BR",{}),me=m(h),G=_(h,F),pe=m(h),he=n(h,"BR",{}),ve=m(h),x=_(h,Q),_e=m(h),we=n(h,"BR",{}),Ee=m(h),ee=_(h,$),h.forEach(s),Me.forEach(s),Ce.forEach(s),se.forEach(s),ye=m(D),z=n(D,"CENTER",{});var Oe=r(z);H=n(Oe,"H5",{});var Te=r(H);te=_(Te,d[0]),Te.forEach(s),Oe.forEach(s),be=m(D),K=n(D,"P",{});var Ae=r(K);le=_(Ae,d[1]),Ae.forEach(s),ge=m(D),k=n(D,"DIV",{class:!0});var re=r(k);T=n(re,"DIV",{class:!0});var Je=r(T);A=n(Je,"SMALL",{});var je=r(A);ke=_(je,"Date and time: "),ae=_(je,d[4]),je.forEach(s),Je.forEach(s),De=m(re),J=n(re,"DIV",{class:!0});var Ne=r(J);N=n(Ne,"P",{class:!0});var Ue=r(N);W=n(Ue,"SMALL",{});var Ze=r(W);Ie=_(Ze,"signature"),Ze.forEach(s),Ue.forEach(s),Ne.forEach(s),re.forEach(s),D.forEach(s),this.h()},h(){b(p,"class","button-secondary"),b(y,"class","one-half column"),b(O,"class","u-pull-right"),b(M,"class","one-half column"),b(E,"class","row"),b(T,"class","one-half column"),b(N,"class","u-pull-right"),b(J,"class","one-half column"),b(k,"class","row"),b(u,"id","capture")},m(l,c){X(l,g,c),e(g,p),e(p,C),X(l,L,c),X(l,V,c),X(l,j,c),X(l,u,c),e(u,E),e(E,y),e(y,S),e(S,B),e(B,a),e(B,t),e(y,P),e(y,R),Ke(q,R,null),e(R,ie),e(R,U),e(U,ce),e(E,de),e(E,M),e(M,O),e(O,i),e(i,Y),e(i,ue),e(i,fe),e(i,me),e(i,G),e(i,pe),e(i,he),e(i,ve),e(i,x),e(i,_e),e(i,we),e(i,Ee),e(i,ee),e(u,ye),e(u,z),e(z,H),e(H,te),e(u,be),e(u,K),e(K,le),e(u,ge),e(u,k),e(k,T),e(T,A),e(A,ke),e(A,ae),e(k,De),e(k,J),e(J,N),e(N,W),e(W,Ie),w=!0,Le||(Be=We(p,"click",d[5]),Le=!0)},p(l,[c]){(!w||c&8)&&I(t,l[3]),(!w||c&4)&&Z!==(Z=l[2].Institution+"")&&I(Y,Z),(!w||c&4)&&F!==(F=l[2].postcode+"")&&I(G,F),(!w||c&4)&&Q!==(Q=l[2].city+"")&&I(x,Q),(!w||c&4)&&$!==($=l[2].country+"")&&I(ee,$),(!w||c&1)&&I(te,l[0]),(!w||c&2)&&I(le,l[1]),(!w||c&16)&&I(ae,l[4])},i(l){w||(Xe(q.$$.fragment,l),w=!0)},o(l){Ye(q.$$.fragment,l),w=!1},d(l){l&&s(g),l&&s(L),l&&s(V),l&&s(j),l&&s(u),Ge(q),Le=!1,Be()}}}function st(d,g,p){let C;xe(d,tt,a=>p(6,C=a));let L=null,V=null,j={},u=null,E=null;const y=()=>{let a=window.location.href;for(var t=0;t<a.length;t++)if(a[t]+a[t+1]+a[t+2]+a[t+3]+a[t+4]+a[t+5]+a[t+6]+a[t+7]+a[t+8]=="document/")return a.slice(t+9,a.length)},S=async a=>{let t=y();return await fetch("https://backend.encrygen.co.uk/api/docs/display/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:a})}).then(P=>{if(P.ok)if(P.body==null)alert("you are not allowed to view this content"),Se("/");else return alert("Invoice found successfully..."),P.json();else alert("you are not allowed to view this content"),Se("/")})};return et(async()=>{if(C.params.generate!="display"){let a=prompt("Please enter your key:");if(a==null||a=="")alert("no key"),Se("/");else{let t=await S(a);p(0,L=t.title),p(3,u=t._id),p(1,V=t.content),p(2,j=t.profile),p(4,E=t.date)}}}),[L,V,j,u,E,()=>{document.getElementById("capture");var a=window.$("#capture").html(),t=window.open("","","height=400,width=800");t.document.write(`<html><head><title>Doc ${Date()}</title>`),t.document.write('<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.min.css" integrity="sha512-EZLkOqwILORob+p0BXZc+Vm3RgJBOe1Iq/0fiI7r/wJgzOFZMlsqTa29UEl6v6U6gsV4uIpsNZoV32YZqrCRCQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />'),t.document.write('</head><body ><div class="container">'),t.document.write(a),t.document.write("</div></body></html>"),t.document.close(),t.print()}]}class dt extends Fe{constructor(g){super();Qe(this,g,st,at,$e,{})}}export{dt as default};
