import{S as Ye,i as $e,s as Xe,e,t as c,k as d,c as l,a as r,h as i,d as o,m as h,g as ft,F as t,j as k,w as Ze,x as xe,b as A,y as tl,L as el,q as ll,o as al,B as ol,_ as rl,K as sl,v as nl}from"../../chunks/vendor-022b7721.js";import{p as cl}from"../../chunks/stores-22f066c8.js";import{g as Re}from"../../chunks/navigation-bd39ff07.js";import il from"./QrJs.svelte-08f177d1.js";import"../../chunks/singletons-a6a7384f.js";function Ke(u,v,m){const I=u.slice();return I[11]=v[m],I}function We(u){let v,m,I,P=u[11].id+"",H,V,_,w=u[11].name+"",L,M,f,j=u[11].price+"",n,s,q,S,N=u[11].quantity+"",O,W;return{c(){v=e("tr"),m=e("td"),I=e("strong"),H=c(P),V=d(),_=e("td"),L=c(w),M=d(),f=e("td"),n=c(j),s=c(" \xA3"),q=d(),S=e("td"),O=c(N),W=d()},l(g){v=l(g,"TR",{});var E=r(v);m=l(E,"TD",{});var tt=r(m);I=l(tt,"STRONG",{});var et=r(I);H=i(et,P),et.forEach(o),tt.forEach(o),V=h(E),_=l(E,"TD",{});var J=r(_);L=i(J,w),J.forEach(o),M=h(E),f=l(E,"TD",{});var U=r(f);n=i(U,j),s=i(U," \xA3"),U.forEach(o),q=h(E),S=l(E,"TD",{});var lt=r(S);O=i(lt,N),lt.forEach(o),W=h(E),E.forEach(o)},m(g,E){ft(g,v,E),t(v,m),t(m,I),t(I,H),t(v,V),t(v,_),t(_,L),t(v,M),t(v,f),t(f,n),t(f,s),t(v,q),t(v,S),t(S,O),t(v,W)},p(g,E){E&1&&P!==(P=g[11].id+"")&&k(H,P),E&1&&w!==(w=g[11].name+"")&&k(L,w),E&1&&j!==(j=g[11].price+"")&&k(n,j),E&1&&N!==(N=g[11].quantity+"")&&k(O,N)},d(g){g&&o(v)}}}function dl(u){let v,m,I,P,H,V,_,w,L,M,f,j=u[2].name+"",n,s,q,S=u[2].Faddress+"",N,O,W,g=u[2].country+"",E,tt,et,J=u[2].city+"",U,lt,Ut,vt=u[2].postcode+"",Rt,zt,at,ot,y,mt=u[4].Institution+"",Bt,Qt,Gt,Kt,pt=u[4].postcode+"",Pt,Wt,Yt,$t,_t=u[4].city+"",St,Xt,Zt,xt,Et=u[4].country+"",Ht,te,z,bt,ee,wt,rt,le,jt,ae,Y,$,oe,yt,re,se,Q,X,Z,st,ne,ce,x,ie,qt,de,he,C,gt,ue,fe,Tt,ve,me,Dt,pe,_e,kt,Ee,be,nt,we,G,ct,it,ye,At,ge,dt,ht,It,Te,T,De,Be;$=new il({props:{codeValue:window.location.href,squareSize:"100"}});let ut=u[0],D=[];for(let a=0;a<ut.length;a+=1)D[a]=We(Ke(u,ut,a));return{c(){v=e("center"),m=e("button"),I=c("Download PDF"),P=d(),H=e("hr"),V=d(),_=e("div"),w=e("div"),L=e("div"),M=e("p"),f=e("small"),n=c(j),s=e("br"),q=d(),N=c(S),O=e("br"),W=d(),E=c(g),tt=e("br"),et=d(),U=c(J),lt=e("br"),Ut=d(),Rt=c(vt),zt=d(),at=e("div"),ot=e("p"),y=e("small"),Bt=c(mt),Qt=d(),Gt=e("br"),Kt=d(),Pt=c(pt),Wt=d(),Yt=e("br"),$t=d(),St=c(_t),Xt=d(),Zt=e("br"),xt=d(),Ht=c(Et),te=d(),z=e("center"),bt=e("h5"),ee=c("Invoice"),wt=e("p"),rt=e("small"),le=c("id: "),jt=c(u[3]),ae=d(),Y=e("p"),Ze($.$$.fragment),oe=d(),yt=e("small"),re=c("scan and share"),se=d(),Q=e("table"),X=e("thead"),Z=e("tr"),st=e("th"),ne=c("Product"),ce=d(),x=e("th"),ie=c("Total: "),qt=c(u[1]),de=c(" \xA3"),he=d(),C=e("tr"),gt=e("th"),ue=c("id"),fe=d(),Tt=e("th"),ve=c("name"),me=d(),Dt=e("th"),pe=c("price"),_e=d(),kt=e("th"),Ee=c("quantity"),be=d(),nt=e("tbody");for(let a=0;a<D.length;a+=1)D[a].c();we=d(),G=e("div"),ct=e("div"),it=e("small"),ye=c("Date and time: "),At=c(u[5]),ge=d(),dt=e("div"),ht=e("p"),It=e("small"),Te=c("signature"),this.h()},l(a){v=l(a,"CENTER",{});var p=r(v);m=l(p,"BUTTON",{class:!0});var b=r(m);I=i(b,"Download PDF"),b.forEach(o),p.forEach(o),P=h(a),H=l(a,"HR",{}),V=h(a),_=l(a,"DIV",{id:!0});var F=r(_);w=l(F,"DIV",{class:!0});var Vt=r(w);L=l(Vt,"DIV",{class:!0});var Pe=r(L);M=l(Pe,"P",{});var Se=r(M);f=l(Se,"SMALL",{});var R=r(f);n=i(R,j),s=l(R,"BR",{}),q=h(R),N=i(R,S),O=l(R,"BR",{}),W=h(R),E=i(R,g),tt=l(R,"BR",{}),et=h(R),U=i(R,J),lt=l(R,"BR",{}),Ut=h(R),Rt=i(R,vt),R.forEach(o),Se.forEach(o),Pe.forEach(o),zt=h(Vt),at=l(Vt,"DIV",{class:!0});var He=r(at);ot=l(He,"P",{class:!0});var je=r(ot);y=l(je,"SMALL",{});var B=r(y);Bt=i(B,mt),Qt=h(B),Gt=l(B,"BR",{}),Kt=h(B),Pt=i(B,pt),Wt=h(B),Yt=l(B,"BR",{}),$t=h(B),St=i(B,_t),Xt=h(B),Zt=l(B,"BR",{}),xt=h(B),Ht=i(B,Et),B.forEach(o),je.forEach(o),He.forEach(o),Vt.forEach(o),te=h(F),z=l(F,"CENTER",{});var Lt=r(z);bt=l(Lt,"H5",{});var qe=r(bt);ee=i(qe,"Invoice"),qe.forEach(o),wt=l(Lt,"P",{});var Ae=r(wt);rt=l(Ae,"SMALL",{});var ke=r(rt);le=i(ke,"id: "),jt=i(ke,u[3]),ke.forEach(o),Ae.forEach(o),ae=h(Lt),Y=l(Lt,"P",{});var Mt=r(Y);xe($.$$.fragment,Mt),oe=h(Mt),yt=l(Mt,"SMALL",{});var Ve=r(yt);re=i(Ve,"scan and share"),Ve.forEach(o),Mt.forEach(o),Lt.forEach(o),se=h(F),Q=l(F,"TABLE",{class:!0});var Ct=r(Q);X=l(Ct,"THEAD",{});var Ft=r(X);Z=l(Ft,"TR",{});var Nt=r(Z);st=l(Nt,"TH",{colspan:!0});var Me=r(st);ne=i(Me,"Product"),Me.forEach(o),ce=h(Nt),x=l(Nt,"TH",{});var Ot=r(x);ie=i(Ot,"Total: "),qt=i(Ot,u[1]),de=i(Ot," \xA3"),Ot.forEach(o),Nt.forEach(o),he=h(Ft),C=l(Ft,"TR",{});var K=r(C);gt=l(K,"TH",{});var Ce=r(gt);ue=i(Ce,"id"),Ce.forEach(o),fe=h(K),Tt=l(K,"TH",{});var Fe=r(Tt);ve=i(Fe,"name"),Fe.forEach(o),me=h(K),Dt=l(K,"TH",{});var Ne=r(Dt);pe=i(Ne,"price"),Ne.forEach(o),_e=h(K),kt=l(K,"TH",{});var Oe=r(kt);Ee=i(Oe,"quantity"),Oe.forEach(o),K.forEach(o),Ft.forEach(o),be=h(Ct),nt=l(Ct,"TBODY",{});var Je=r(nt);for(let Le=0;Le<D.length;Le+=1)D[Le].l(Je);Je.forEach(o),Ct.forEach(o),we=h(F),G=l(F,"DIV",{class:!0});var Jt=r(G);ct=l(Jt,"DIV",{class:!0});var Ue=r(ct);it=l(Ue,"SMALL",{});var Ie=r(it);ye=i(Ie,"Date and time: "),At=i(Ie,u[5]),Ie.forEach(o),Ue.forEach(o),ge=h(Jt),dt=l(Jt,"DIV",{class:!0});var ze=r(dt);ht=l(ze,"P",{class:!0});var Qe=r(ht);It=l(Qe,"SMALL",{});var Ge=r(It);Te=i(Ge,"signature"),Ge.forEach(o),Qe.forEach(o),ze.forEach(o),Jt.forEach(o),F.forEach(o),this.h()},h(){A(m,"class","button-secondary"),A(L,"class","one-half column"),A(ot,"class","u-pull-right"),A(at,"class","one-half column"),A(w,"class","row"),A(st,"colspan","3"),A(Q,"class","u-full-width"),A(ct,"class","one-half column"),A(ht,"class","u-pull-right"),A(dt,"class","one-half column"),A(G,"class","row"),A(_,"id","capture")},m(a,p){ft(a,v,p),t(v,m),t(m,I),ft(a,P,p),ft(a,H,p),ft(a,V,p),ft(a,_,p),t(_,w),t(w,L),t(L,M),t(M,f),t(f,n),t(f,s),t(f,q),t(f,N),t(f,O),t(f,W),t(f,E),t(f,tt),t(f,et),t(f,U),t(f,lt),t(f,Ut),t(f,Rt),t(w,zt),t(w,at),t(at,ot),t(ot,y),t(y,Bt),t(y,Qt),t(y,Gt),t(y,Kt),t(y,Pt),t(y,Wt),t(y,Yt),t(y,$t),t(y,St),t(y,Xt),t(y,Zt),t(y,xt),t(y,Ht),t(_,te),t(_,z),t(z,bt),t(bt,ee),t(z,wt),t(wt,rt),t(rt,le),t(rt,jt),t(z,ae),t(z,Y),tl($,Y,null),t(Y,oe),t(Y,yt),t(yt,re),t(_,se),t(_,Q),t(Q,X),t(X,Z),t(Z,st),t(st,ne),t(Z,ce),t(Z,x),t(x,ie),t(x,qt),t(x,de),t(X,he),t(X,C),t(C,gt),t(gt,ue),t(C,fe),t(C,Tt),t(Tt,ve),t(C,me),t(C,Dt),t(Dt,pe),t(C,_e),t(C,kt),t(kt,Ee),t(Q,be),t(Q,nt);for(let b=0;b<D.length;b+=1)D[b].m(nt,null);t(_,we),t(_,G),t(G,ct),t(ct,it),t(it,ye),t(it,At),t(G,ge),t(G,dt),t(dt,ht),t(ht,It),t(It,Te),T=!0,De||(Be=el(m,"click",u[6]),De=!0)},p(a,[p]){if((!T||p&4)&&j!==(j=a[2].name+"")&&k(n,j),(!T||p&4)&&S!==(S=a[2].Faddress+"")&&k(N,S),(!T||p&4)&&g!==(g=a[2].country+"")&&k(E,g),(!T||p&4)&&J!==(J=a[2].city+"")&&k(U,J),(!T||p&4)&&vt!==(vt=a[2].postcode+"")&&k(Rt,vt),(!T||p&16)&&mt!==(mt=a[4].Institution+"")&&k(Bt,mt),(!T||p&16)&&pt!==(pt=a[4].postcode+"")&&k(Pt,pt),(!T||p&16)&&_t!==(_t=a[4].city+"")&&k(St,_t),(!T||p&16)&&Et!==(Et=a[4].country+"")&&k(Ht,Et),(!T||p&8)&&k(jt,a[3]),(!T||p&2)&&k(qt,a[1]),p&1){ut=a[0];let b;for(b=0;b<ut.length;b+=1){const F=Ke(a,ut,b);D[b]?D[b].p(F,p):(D[b]=We(F),D[b].c(),D[b].m(nt,null))}for(;b<D.length;b+=1)D[b].d(1);D.length=ut.length}(!T||p&32)&&k(At,a[5])},i(a){T||(ll($.$$.fragment,a),T=!0)},o(a){al($.$$.fragment,a),T=!1},d(a){a&&o(v),a&&o(P),a&&o(H),a&&o(V),a&&o(_),ol($),rl(D,a),De=!1,Be()}}}function hl(u,v,m){let I;sl(u,cl,n=>m(8,I=n));let P=[],H=0,V={},_="",w={},L=null;const M=()=>{let n=window.location.href;for(var s=0;s<n.length;s++)if(n[s]+n[s+1]+n[s+2]+n[s+3]+n[s+4]+n[s+5]+n[s+6]=="invoice")return n.slice(s+8,n.length)},f=async n=>{let s=M();return await fetch("https://backend.encrygen.co.uk/api/invoices/display/"+s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:n})}).then(q=>{if(q.ok)if(q.body==null)alert("you are not allowed to view this content"),Re("/");else return alert("Invoice found successfully..."),q.json();else alert("you are not allowed to view this content"),Re("/")})};return nl(async()=>{if(I.params.generate!="display"){let n=prompt("Please enter your key:");if(n==null||n=="")alert("no key"),Re("/");else{let s=await f(n);m(0,P=s.products),m(3,_=s._id),m(2,V=s.client),m(1,H=s.total),m(4,w=s.profile),m(5,L=s.date)}}}),[P,H,V,_,w,L,async()=>{document.getElementById("capture");var n=window.$("#capture").html(),s=window.open("","","height=400,width=800");s.document.write(`<html><head><title>Doc ${Date()}</title>`),s.document.write('	<link rel="stylesheet" href="/normalize.css"> <link rel="stylesheet" href="/skeleton.css">'),s.document.write('</head><body ><div class="container">'),s.document.write(n),s.document.write("</div></body></html>"),s.document.close(),await new Promise(S=>setTimeout(S,400)),s.print()}]}class _l extends Ye{constructor(v){super();$e(this,v,hl,dl,Xe,{})}}export{_l as default};
